{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emp_table</title>
    <link rel="stylesheet" href="{% static 'emp_app/css/style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" 
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
    crossorigin="anonymous">

    <link rel="stylesheet" href="{% static 'emp_app/css/style.css' %}">
    <style>
        
        body {
            
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background-image: url("{% static 'emp_app/images/bg3.jpeg' %}");
        background-size: cover;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .container {
        flex-wrap: wrap;
        max-height: 98%;
        overflow-y: auto;
        text-align: left;

        background: rgba(255, 255, 255, 0.1); 
        border-radius: 20px;
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.18);
        color: white;
        text-align: center;
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
        
    }
        
    table {

        background-color: #8b8b8b45;
        border-collapse: collapse;
        width: 90%;
        margin: 20px auto;
        
    }
    th, td,th {
        font-family:  Roboto, Open Sans, Montserrat, Arial, Helvetica, and Verdana;;
        border: 3px solid #ffffff;
        padding: 10px 0%;
        text-align: center;
        color: #f2f2f2;
    }
    th {
        background-color: #8b8b8b45;
    }
    .emp_table{
        flex-wrap: wrap;
        max-height: 90%;
        overflow-y: auto;
        text-align: left;
    }
    .search_bar input{
        margin-top: 20px;
        color: #ffffff;
        width: 65%;
        height: 40px;
        border:4px solid #2c2c2c;
        background-color:#2c2c2c ;
        border-radius: 25px;
    }
    .search_bar ::placeholder{
        color: #ffffff;
        font-style: italic;
    }

    .delete-btn:hover {
    background-color: rgba(0, 0, 0, 0.329);
    color: white;
    }
    
    .update-btn:hover {
        background-color: rgba(0, 0, 0, 0.329);;
        color: white;
    }
    .search_bar .btn-link{
        display: inline-block;
        padding: 10px 20px;
        margin: 5px;
        border-radius: 10px;
        background-color: transparent;
        border: 2px solid #ffffff;
        color: #ffffff;
        text-decoration: none;
        transition: background-color 0.3s, color 0.3s;
        font-weight: 900; 
        box-shadow: 2px 2px 8px rgba(0, 0, 0, 2);
    }
    .btn-link:hover{
        cursor: pointer;
        background-color: rgba(0, 0, 0, 0.329);
        color: rgb(0, 0, 0);
        box-shadow: 2px 2px 8px rgba(0, 0, 0, 2);
    }
      .snowflake {
    position: fixed;
    top: -10px;
    color: white;
    user-select: none;
    z-index: 9999;
    pointer-events: none;
    animation-name: fall;
    animation-timing-function: linear;
    animation-iteration-count: 1;
  }

  @keyframes fall {
    0% {
      transform: translateY(0) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(100vh) rotate(360deg);
      opacity: 0;
    }
  }


        
    </style>
</head>
<body>
    <div class="overlay"></div>

    <div class="container const" >
<form action="" method="get" class="search_bar">
    <input type="text" name="q",class = "Serch-input" placeholder="search by name" value="{{request.get.q}}">
    
    <a style="color: rgb(255, 255, 255);" href="/emp_list/" class="btn-link l ">GO TO LIST</a>
    <a style="color: rgb(255, 255, 255);" href="{% url 'home' %}" class="btn-link l ">HOME</a>
</form>
    <table >
        <thead>
            <tr>
                <th>Name</th>
                <th>Designation</th>
                <th>Employee ID</th>
                <th>Mobile Nummber</th>
                <th>Email ID</th>
                <th>Gender</th>
                <th>Salary</th>
                <th>Working</th>
                <th>Delete</th>
                <th>Update</th>
            </tr>
        </thead>
    <div class="emp_table" >
        <tbody>
            {% for emp in employe_table %}
            <tr>
                <td>{{ emp.name }}</td>
                <td>{{ emp.designation }}</td>
                <td>{{ emp.employe_id|slice:":8" }}</td>
                <td>{{ emp.mobile_num }}</td>
                <td>{{ emp.email_id }}</td>

                <td>
                    {% if emp.gender == 'M' %}
                        Male
                    {% elif emp.gender == 'F' %}
                        Female
                    {% elif emp.gender == 'O' %}
                        other
                    {% else %}
                        Not mention
                    {% endif %}
                    
                </td>

                <td>{{ emp.salary }}</td>

                <td>
                    {% if emp.working %}
                        Working
                    {% else %}
                        Not Working
                    {% endif %}
                </td>

                <div class="btn-hover">
                <!-- <td><a href="/forms/delete/{{obj.employe_id}}/" class="btn delete-btn" style="color: rgb(255, 255, 255); border: 3px solid rgb(0, 0, 0);">Delete-</a></td> -->
                 <td>
                    {% if emp.employe_id %}
                        <a href="{% url 'update' emp.employe_id %}" class="btn update-btn" style="color: greenyellow; border: 3px solid rgb(0, 0, 0);">UPDATE</a>
                    {% else %}
                        <span style="color: red;">(Invalid ID)</span>
                    {% endif %}

                 </td>
                <!-- <td><a href="/forms/update/{{obj.employe_id}}/" class="btn update-btn" style="color: rgb(255, 255, 255); border: 3px solid rgb(0, 0, 0);">Update+</a></td> -->
                 <td>
                    {% if emp.employe_id %}
                        <a href="{% url 'delete' emp.employe_id %}" class="btn delete-btn" style="color: red; border: 3px solid rgb(0, 0, 0);">DELETE</a>
                    {% else %}
                        <span style="color: red;">(Invalid ID)</span>
                    {% endif %}

                 </td>
                </div>

            </tr>
            {% endfor %}
        </tbody>
    </div>
    </table>
</div>


<!-- Snowfall Script -->
  <script>
    function createSnowflake() {
      const snowflake = document.createElement('div');
      snowflake.classList.add('snowflake');
      snowflake.textContent = 'â„';
      snowflake.style.left = Math.random() * window.innerWidth + 'px';
      snowflake.style.fontSize = (Math.random() * 10 + 10) + 'px';
      snowflake.style.opacity = Math.random();
      snowflake.style.animationDuration = (Math.random() * 5 + 5) + 's';

      document.body.appendChild(snowflake);
      setTimeout(() => snowflake.remove(), 10000);
    }

    setInterval(createSnowflake, 100); // every 100ms
  </script>

</body>
</html>
